import{R as f,c as a,r as c,y as E,F as z,j as u}from"./index-4b638fea.js";import{I as P}from"./dateTools-587f68dc.js";import W from"./InActiveSystem-ffdfb3e7.js";import $ from"./RestrictionShowRequests-1c206636.js";import q from"./SetWorkingWeek-0827d6ec.js";/* empty css              */import"./useRestrictionShowRequests-298147b4.js";function H(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function A(e){let o=e,s=!1;const t=new Set;return{getState(){return o},updateState(n){o=typeof n=="function"?n(o):n},setState(n){this.updateState(n),t.forEach(l=>l(o))},initialize(n){s||(o=n,s=!0)},subscribe(n){return t.add(n),()=>t.delete(n)}}}const B=()=>A({notifications:[],queue:[],limit:5}),D=B();function F(e,o){const s=e.getState(),t=o([...s.notifications,...s.queue]);e.setState({notifications:t.slice(0,s.limit),queue:t.slice(s.limit),limit:s.limit})}function j(e,o=D){const s=e.id||H();return F(o,t=>e.id&&t.some(n=>n.id===e.id)?t:[...t,{...e,id:s}]),s}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},k.apply(this,arguments)}function V(e,o){if(e==null)return{};var s={},t=Object.keys(e),n,l;for(l=0;l<t.length;l++)n=t[l],!(o.indexOf(n)>=0)&&(s[n]=e[n]);return s}function R(e,o){if(e==null)return{};var s=V(e,o),t,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],!(o.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var J=["size","color"];function K(e){var o=e.size,s=o===void 0?24:o,t=e.color,n=t===void 0?"currentColor":t,l=R(e,J);return f.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-checks",width:s,height:s,viewBox:"0 0 24 24",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},l),f.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.createElement("path",{d:"M7 12l5 5l10 -10"}),f.createElement("path",{d:"M2 12l5 5m5 -5l5 -5"}))}var X=["size","color"];function G(e){var o=e.size,s=o===void 0?24:o,t=e.color,n=t===void 0?"currentColor":t,l=R(e,X);return f.createElement("svg",k({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-x",width:s,height:s,viewBox:"0 0 24 24",stroke:n,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},l),f.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),f.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}const Q=({message:e})=>j({disallowClose:!1,title:e,message:"خطا",color:"red",icon:a(G,{}),styles:()=>({title:{fontSize:"100%"},description:{fontSize:"100%"}})}),U=({message:e})=>j({disallowClose:!1,message:"عملیات موفقیت آمیز",title:e,color:"green",icon:a(K,{}),styles:()=>({title:{fontSize:"100%",lineHeight:"2"},description:{fontSize:"100%"}})});function Y(e,o,s,t){const[n,l]=c.useState(null),[v,g]=c.useState(""),[d,m]=c.useState({in_progress:!1});function S(){switch(o){case"update":g("update"),m({...d,in_progress:!0}),E().updateRestrictions(s,t).then(h=>{l(h.data)}).catch(h=>{console.error(6001,"Error fetching mission list:",h)}).finally(()=>{m({...d,in_progress:!1})});break;case"select":g("select"),m({...d,in_progress:!0}),E().selectRestrictions(s,t).then(h=>{l(h.data)}).catch(h=>{console.error(6001,"Error fetching mission list:",h)}).finally(()=>{m({...d,in_progress:!1})});break}}return c.useEffect(()=>{S()},[e]),{result:n,resultType:v,state:d,refreshData:S}}const ie=()=>{const[e,o]=c.useState("select"),[s,t]=c.useState(null),[n,l]=c.useState(null),[v,g]=c.useState(!1),{result:d,resultType:m,state:S,refreshData:h}=Y(v,e,s,n),C=u("tr",{children:[a("th",{className:"text-center"}),a("th",{className:"text-right",children:"عنوان"}),a("th",{className:"th-center text-center",children:"  مقدار فعلی "}),a("th",{className:"th-center text-center",children:"  واحد "})]}),[N,O]=c.useState(),[M,b]=c.useState(!1),[r,y]=c.useState();c.useEffect(()=>{d&&d.data&&m==="select"&&O(d.data)},[d]);const I=i=>{y(i),b(!0)},_=(i,p)=>{p==="number"?(r.value=i.target.value,y({...r})):(r.value=P(i.target.value.toISOString()).split(" ")[1],y({...r}))},T=async i=>{try{"local"==="local"&&(t(i==null?void 0:i.key),l(i==null?void 0:i.value),o("update"),g(!v),U({message:"محدودیت با موفقیت افزوده شد"}),b(!1))}catch{Q({message:"خطا در دریافت جزییات"})}},w=[{title:" آخرین زمان ثبت درخواست روزانه",desc:"آخرین زمانی که کاربران برای روز جاری میتوانند درخواست خودرو کنند",value:"",key:1,unit:"ساعت ",type:"time"},{title:" اولین زمان ثبت درخواست روزانه",desc:"اولین زمانی که کاربران برای روز جاری میتوانند درخواست خودرو کنند",value:"",key:2,unit:"ساعت ",type:"time"},{title:"فاصله زمانی بین درخواست های یک کاربر",desc:" حداقل فاصله زمانی  بین دو درخواست متوالی یک کاربر در طول یک روز ",value:"",key:3,unit:"دقیقه ",type:"number"},{title:"محدودیت زمانی درخواست لحظه ای",desc:"حداقل زمان قبل از ثبت درخواست لحظه ای",value:"",key:4,unit:"دقیقه ",type:"number"},{title:"حداکثر فاصله زمانی نسبت به زمان درخواست برای شروع سفر توسط راننده",desc:"حداکثر زمان بعد از ساعت سفر که رانندگان بتوانند سفر را آغاز نمایند ",value:"",key:6,unit:"دقیقه ",type:"number"},{title:"غیر فعال کردن سیستم",desc:"غیر فعال کردن سیستم",value:"",key:7,unit:"روز",type:"date"},{title:"محدودیت زمان نمایش درخواست ها",desc:"محدودیت زمان نمایش درخواست ها",value:"",key:8,unit:"روز",type:"number"},{title:"تنظیم هفته کاری",desc:"تنظییم هفته کاری",value:"",key:9,unit:"روز",type:"string"}],L=w==null?void 0:w.map(i=>{var p;return a(z,{children:u("tr",{className:"table-row",children:[a("td",{children:a("div",{className:"clickable",children:a("i",{onClick:()=>I(i),className:"fa fa-edit"})})}),a("td",{style:{textAlign:"right"},children:i.title}),i.key!==9&&a("td",{children:((p=N==null?void 0:N.find(x=>(x==null?void 0:x.key)===(i==null?void 0:i.key)))==null?void 0:p.value)||"ثبت نشده"}),i.key===9&&"ثبت شده",a("td",{children:i==null?void 0:i.unit})]},i.name)})});return a("div",{className:"Restrictions-component",children:a("div",{className:"row",children:u("div",{className:"col-12",children:[a("h1",{className:"my-4",children:"محدودیت ها"}),u("table",{children:[a("thead",{className:"text-center",children:C}),a("tbody",{className:"text-center body-div",children:L})]}),M===!0&&a("div",{className:"modal-div",children:a("div",{className:"modal show",id:"myModal","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px",backgroundColor:"rgb(0,0,0,0.8)"},children:a("div",{className:"modal-dialog modal-md",children:u("div",{className:"modal-content",children:[u("div",{className:"modal-header",children:[a("h5",{className:"modal-title",id:"exampleModalLabel",children:(r==null?void 0:r.title)||"Modal Heading"}),a("i",{className:"fa fa-remove",onClick:()=>{b(!1),y(null)}})]}),u("div",{className:"modal-body",children:[r&&(r==null?void 0:r.key)===7&&a(W,{}),r&&(r==null?void 0:r.key)===8&&a($,{}),r&&(r==null?void 0:r.key)===9&&a(q,{}),r&&(r==null?void 0:r.key)!==7&&(r==null?void 0:r.key)!==8&&(r==null?void 0:r.key)!==9&&u(z,{children:[a(Z,{onRestrictionChange:_,item:r}),u("div",{className:"modal-footer",children:[a("button",{type:"button",className:"my-btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>{b(!1),y(null)},children:"بستن"}),a("button",{type:"button",className:"my-btn btn-primary",onClick:()=>T(r),children:"ذخیره"})]})]})]})]})})})})]})})})},Z=({item:e,onRestrictionChange:o})=>{const{type:s,desc:t,value:n}=e;return u("div",{style:{border:"none"},children:[a("label",{children:t}),a("input",{className:"form-control",type:"number",name:"numberInput",id:"numberInput",onChange:l=>o(l,s),defaultValue:n,placeholder:s==="number"?"30 دقیقه":"12:12",step:1})]})};export{ie as default};
