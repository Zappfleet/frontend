import{u as w,a as y,r as o,c as a,j as r,F as u,h as x,f as N}from"./index-0b0339af.js";import{u as C}from"./validation-2a5d93f1.js";const j={phone:{required:!0,showName:""},password:{required:!0,min:6,showName:""}},k=()=>{var i,d,m,h;const{authInfo:c}=w(),{userList:t}=y(),[e,n]=o.useState(),{errors:l,refreshData:E}=C(j,e);o.useEffect(()=>{if(c&&t){const s=t==null?void 0:t.filter(g=>{var p;return g._id===((p=c==null?void 0:c.auth)==null?void 0:p._id)});n(s[0])}},[c]),o.useEffect(()=>{},[e]);const v=()=>{n({...e,password:""}),N.showSuccess("اطلاعات با موفقیت ثبت شد")},b=s=>{N.showError(s.message)},f=()=>{let s={phone:e==null?void 0:e.phone,password:e==null?void 0:e.password};x().updateUser(e==null?void 0:e._id,s).then(v).catch(b)};return a("div",{className:"container-fluid mt-5 profile-component",children:a("div",{className:"row justify-content-center",children:a("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6",children:r("div",{className:"card",children:[a("div",{className:"page-title",children:r("i",{children:[" ","پروفایل"]})}),r("div",{className:"card-body",children:[r("div",{className:"mb-3",children:[a("label",{className:"form-label",children:" نام :   "}),r("span",{children:[" ",e==null?void 0:e.fullname]})]}),r("div",{className:"mb-3",children:[a("label",{className:"form-label",children:"کد پرسنلی :"}),r("span",{children:[" ",e==null?void 0:e.username]})]}),r("div",{className:"mb-3",children:[a("label",{className:"form-label",children:"شماره موبایل"}),a("input",{type:"text",className:"form-control",onChange:s=>n({...e,phone:s.target.value}),value:(e==null?void 0:e.phone)||"",placeholder:"09123456789",autoComplete:"off"}),((i=l.phone)==null?void 0:i.length)>0&&a(u,{children:r("div",{className:"validate",children:[a("i",{className:"fa fa-exclamation-triangle"}),r("div",{className:"error-msg",children:[" ",(d=l.phone)==null?void 0:d.map(s=>a("p",{children:s}))," "]})]})})]}),r("div",{className:"mb-3",children:[a("label",{className:"form-label",children:"رمز عبور جدید"}),a("input",{type:"password",className:"form-control",onChange:s=>n({...e,password:s.target.value}),value:e==null?void 0:e.password,required:!0,placeholder:"رمز عبور جدید",autoComplete:"off"}),((m=l.password)==null?void 0:m.length)>0&&a(u,{children:r("div",{className:"validate",children:[a("i",{className:"fa fa-exclamation-triangle"}),r("div",{className:"error-msg",children:[" ",(h=l.password)==null?void 0:h.map(s=>a("p",{children:s}))," "]})]})})]}),a("div",{className:"d-grid",children:a("button",{disabled:Object.keys(l).length!==0,onClick:()=>f(),className:`my-btn ${Object.keys(l).length===0?"":"my-btn-inactive"}`,children:"ثبت"})})]})]})})})})};export{k as default};
