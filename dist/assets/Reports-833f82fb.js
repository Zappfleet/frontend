import{r as c,x as D,j as r,b as e,aq as H,ag as T,T as l,i as k,p as w,k as C,v as x,F as v,bd as y}from"./index-a6150745.js";import{U as S}from"./UsersSuggestionInput-e4a9c6c6.js";import{S as _}from"./SimpleButton-08510570.js";import O from"./TimeOfServices-01ff955e.js";import A from"./CountOfServicesOfDrivers-76ca8e47.js";import B from"./RestOfDriverBetweenServises-54015895.js";import E from"./DriverList_By_LastServiceAdnDistanse-5495e5a3.js";import"./Chips-194944be.js";import"./SuggestionTextInput-0628c8fd.js";/* empty css              */import"./Page403-9b5beb5c.js";function V(){const[n,a]=c.useState();return c.useEffect(()=>{D().getReportAgencyCost().then(({data:s})=>{a(s)}).catch(console.log)},[]),{result:n}}function j({handleBackClick:n,title:a}){const{result:s}=V(),[o,i]=c.useState(null);c.useEffect(()=>{var f;((f=s==null?void 0:s.data)==null?void 0:f.length)>0&&i(s.data)},[s]),c.useEffect(()=>{console.log(5007,o)},[o]);const u=[{id:1,value:5},{id:2,value:10},{id:3,value:15}],t=[{key:"project_Code",name:"کد پروژه"},{key:"proj_desc",name:"توضیح پروژه"},{key:"manager_emp_num",name:"شناسه مدیر"},{key:"cost_center",name:"مرکز هزینه"},{key:"desc",name:"توضیحات"},{key:"cost",name:"هزینه"},{key:"mission_date",name:"تاریخ سفر"},{key:"created_by",name:"مسافر"},{key:"distance",name:"مسافت"},{key:"mission_start",name:"شروع سفر"},{key:"mission_end",name:"پایان سفر"}];return r("div",{className:"AgencyReport-component",children:[e("i",{className:" fa fa-arrow-left back-icon",onClick:n}),e("p",{children:a}),r("div",{className:"flex items-center px-4",children:[e("div",{className:"flex-1 px-4 "}),e("div",{})]}),e("div",{className:"row",children:e("div",{className:"col-12",children:o&&e(H,{pagesize:u[0].value,items:o,options:u,thead:t})})})]})}function L(n){return T({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M2.85858 2.87756L15.4293 1.08175C15.7027 1.0427 15.9559 1.23265 15.995 1.50601C15.9983 1.52943 16 1.55306 16 1.57672V22.4237C16 22.6999 15.7761 22.9237 15.5 22.9237C15.4763 22.9237 15.4527 22.922 15.4293 22.9187L2.85858 21.1229C2.36593 21.0525 2 20.6306 2 20.1329V3.86751C2 3.36986 2.36593 2.94794 2.85858 2.87756ZM4 4.73481V19.2656L14 20.6942V3.30624L4 4.73481ZM17 19.0002H20V5.00022H17V3.00022H21C21.5523 3.00022 22 3.44793 22 4.00022V20.0002C22 20.5525 21.5523 21.0002 21 21.0002H17V19.0002ZM10.2 12.0002L13 16.0002H10.6L9 13.7145L7.39999 16.0002H5L7.8 12.0002L5 8.00022H7.39999L9 10.2859L10.6 8.00022H13L10.2 12.0002Z"}}]})(n)}function I({driver_id:n,date_filter:a}){const[s,o]=c.useState();return c.useEffect(()=>{D().getReportDriverDaily(n,a).then(({data:i})=>{o(i)}).catch(console.log)},[n,a==null?void 0:a.gmt_from,a==null?void 0:a.gmt_to]),{state:s}}function G({handleBackClick:n,title:a}){var N,b,d;const[s,o]=c.useState([]),[i,u]=c.useState([l().subtract(7,"days").toDate().getTime(),l.now()]);c.useEffect(()=>{},[i]);const{state:t}=I({driver_id:(N=s==null?void 0:s[0])==null?void 0:N._id,date_filter:{gmt_from:i[0],gmt_to:i[1]}});function f(m){o((m==null?void 0:m.length)>0?[m[1]||m[0]]:[])}return r("div",{className:"AgencyReport-component",children:[e("i",{className:"fa fa-arrow-left back-icon",onClick:n}),e("p",{children:a}),r("div",{className:"flex items-center px-4",children:[e("div",{className:"flex-1 px-4 ",children:e(S,{hideChips:!0,showListOnTop:!1,externalState:[s,f],permissions:["DRIVER"]})}),e("div",{children:e(k,{onChange:u,range:!0,calendar:w,locale:C,className:"datetime-picker",inputClass:"datetime-input !text-center !text-lg !p-4 ",value:i})})]}),r("div",{className:"ml-3 mr-8 flex ",children:[e("div",{className:"w-94",children:(s==null?void 0:s[0])&&r("div",{children:[r("div",{children:[r("div",{className:"p-2",children:[e("label",{children:"نام : "}),e("label",{children:(b=s==null?void 0:s[0])==null?void 0:b.full_name})]}),r("div",{className:"p-2",children:[e("label",{children:"شماره  : "}),e("label",{children:(d=s==null?void 0:s[0])==null?void 0:d.phone})]})]}),e("div",{className:"ml-6 mt-6  rounded bg-white p-2 shadow",children:e("label",{children:"جمع هزینه : "})})]})}),r("div",{className:"flex-1",children:[e("div",{children:e("span",{className:"mb-4 inline-block",children:r(_,{className:"bg-success",children:[e("span",{className:"ml-4",children:"دانلود فایل اکسل"}),e(L,{className:"cursor-pointer rounded text-white hover:bg-gray-4",size:24})]})})}),r("table",{className:"w-full border border-gray-5 text-right",children:[e("thead",{className:" border-b bg-gray-4",children:r("tr",{children:[e("th",{className:"p-1",children:"تاریخ"}),e("th",{className:"p-1",children:"تعداد سفر"}),e("th",{className:"p-1",children:"زمان در سفر"}),e("th",{className:"p-1",children:"مسیر طی شده"})]})}),r("tbody",{children:[Object.entries((t==null?void 0:t.trip_report)||{}).map(([m,h])=>r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:x(m)}),e("td",{className:"p-2",children:"2"}),e("td",{className:"p-2",children:l.utc(l((h==null?void 0:h.mission_duration)*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]})),Object.entries((t==null?void 0:t.trip_report)||{}).map(([m,h])=>r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:x(m)}),e("td",{className:"p-2",children:"2"}),e("td",{className:"p-2",children:l.utc(l((h==null?void 0:h.mission_duration)*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]})),Object.entries((t==null?void 0:t.trip_report)||{}).map(([m,h])=>r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:x(m)}),e("td",{className:"p-2",children:"2"}),e("td",{className:"p-2",children:l.utc(l((h==null?void 0:h.mission_duration)*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]}))]})]})]})]})]})}function M({driver_id:n,date_filter:a}){const[s,o]=c.useState();return c.useEffect(()=>{D().getReportDriverGeneral(n,a).then(({data:i})=>{o(i)}).catch(console.log)},[n,a==null?void 0:a.gmt_from,a==null?void 0:a.gmt_to]),{state:s}}function Z({handleBackClick:n,title:a}){var N,b,d,m,h,R;const[s,o]=c.useState([]),[i,u]=c.useState([l().subtract(7,"days").toDate().getTime(),l.now()]),{state:t}=M({driver_id:(N=s==null?void 0:s[0])==null?void 0:N._id,date_filter:{gmt_from:i[0],gmt_to:i[1]}});function f(p){o((p==null?void 0:p.length)>0?[p[1]||p[0]]:[])}return r("div",{className:"AgencyReport-component",children:[e("i",{className:" fa fa-arrow-left back-icon",onClick:n}),e("p",{children:a}),r("div",{className:"flex items-center px-4",children:[e("div",{className:"flex-1 px-4 ",children:e(S,{hideChips:!0,showListOnTop:!1,externalState:[s,f],permissions:["DRIVER"]})}),e("div",{children:e(k,{onChange:u,range:!0,calendar:w,locale:C,className:"datetime-picker",inputClass:"datetime-input !text-center !text-lg !p-4 ",value:i})})]}),r("div",{className:"ml-3 mr-8 flex ",children:[e("div",{className:"w-94",children:(s==null?void 0:s[0])&&r("div",{children:[r("div",{children:[r("div",{className:"p-2",children:[e("label",{children:"نام : "}),e("label",{children:(b=s==null?void 0:s[0])==null?void 0:b.full_name})]}),r("div",{className:"p-2",children:[e("label",{children:"شماره  : "}),e("label",{children:(d=s==null?void 0:s[0])==null?void 0:d.phone})]})]}),e("div",{className:"ml-6 mt-6  rounded bg-white p-2 shadow",children:e("label",{children:"جمع هزینه : "})})]})}),r("div",{className:"flex-1",children:[e("div",{children:e("span",{className:"mb-4 inline-block",children:r(_,{className:"bg-success",children:[e("span",{className:"ml-4",children:"دانلود فایل اکسل"}),e(L,{className:"cursor-pointer rounded text-white hover:bg-gray-4",size:24})]})})}),r("table",{className:"w-full border border-gray-5 text-right",children:[e("thead",{className:" border-b bg-gray-4",children:r("tr",{children:[e("th",{className:"p-1",children:"تاریخ ساعت"}),e("th",{className:"p-1",children:"زمان در سفر"}),e("th",{className:"p-1",children:"مسیر طی شده"})]})}),r("tbody",{children:[(m=t==null?void 0:t.missions)==null?void 0:m.map(p=>{var g;return r(v,{children:[r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:y((g=p.extra)==null?void 0:g.mission_start)}),e("td",{className:"p-2",children:l.utc(l(p.extra.mission_duration*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]}),e("tr",{className:"even:bg-gray-2",children:e("td",{colSpan:4,className:"p-2 text-sm"})})]})}),(h=t==null?void 0:t.missions)==null?void 0:h.map(p=>{var g;return r(v,{children:[r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:y((g=p.extra)==null?void 0:g.mission_start)}),e("td",{className:"p-2",children:l.utc(l(p.extra.mission_duration*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]}),e("tr",{className:"even:bg-gray-2",children:e("td",{colSpan:4,className:"p-2 text-sm"})})]})}),(R=t==null?void 0:t.missions)==null?void 0:R.map(p=>{var g;return r(v,{children:[r("tr",{className:"border-b border-gray-4",children:[e("td",{className:"p-2",children:y((g=p.extra)==null?void 0:g.mission_start)}),e("td",{className:"p-2",children:l.utc(l(p.extra.mission_duration*1e5)).format("HH:mm:ss")}),e("td",{className:"p-2",children:"-"})]}),e("tr",{className:"even:bg-gray-2",children:e("td",{colSpan:4,className:"p-2 text-sm"})})]})})]})]})]})]})]})}function U(){const[n,a]=c.useState(!1),[s,o]=c.useState(""),[i,u]=c.useState(""),t=[{Title:"گزارش هزینه آژانس ها",componentName:"AgencyReport",icon:"fas fa-money-bill-alt"},{Title:"گزارش روزانه رانندگان",componentName:"DriverReport",icon:"fas fa-calendar-alt"},{Title:"ریز گزارش رانندگان",componentName:"DriverReportDetails",icon:"fas fa-history"},{Title:"گزارش مدت زمان هر سرویس",componentName:"TimeOfServices",icon:"fas fa-hourglass-end"},{Title:"دسترسی به تعداد سرویس های انجام شده توسط رانندگان در بازه زمانی مشخص",componentName:"CountOfServicesOfDrivers",icon:"fas fa-filter"},{Title:"گزارش میزان استراحت هر راننده بین سرویس ها",componentName:"RestOfDriverBetweenServises",icon:"fas fa-hotel"},{Title:"گزارش لیست رانندگان بر اساس آخرین زمان سرویس و مسافت",componentName:"DriverList_By_LastServiceAdnDistanse",icon:"fas fa-sort-amount-down"}],f=d=>{a(!0),o(d.Title),u(d.componentName)},N=()=>{a(!1),o(""),u("")};return e(v,{children:e("div",{className:"reports-component",children:n?(()=>{switch(i){case"AgencyReport":return e(j,{handleBackClick:N,title:s});case"DriverReport":return e(G,{handleBackClick:N,title:s});case"DriverReportDetails":return e(Z,{handleBackClick:N,title:s});case"TimeOfServices":return e(O,{handleBackClick:N,title:s});case"CountOfServicesOfDrivers":return e(A,{handleBackClick:N,title:s});case"RestOfDriverBetweenServises":return e(B,{handleBackClick:N,title:s});case"DriverList_By_LastServiceAdnDistanse":return e(E,{handleBackClick:N,title:s})}})():e(v,{children:e("div",{className:"row row-amar",children:t.map((d,m)=>e("div",{className:"col-6 col-md-4",children:r("div",{className:"box",onClick:()=>f(d),children:[e("div",{className:"col-2 right-div",children:e("i",{className:`${d.icon}`})}),e("div",{className:"col-10 left-div",children:e("div",{className:"title",children:d==null?void 0:d.Title})})]})}))})})})})}export{U as default};
