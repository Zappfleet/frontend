import{r as m,j as f,c as r,bk as R,k as h,F as w,aD as D}from"./index-0b0339af.js";import{C as p}from"./Chips-65a50fec.js";import{u as F,S as P}from"./SuggestionTextInput-599de7a6.js";function E(e){var v;const{permissions:l,freeInput:u,showListOnTop:d=!0,externalState:t,include_external_base:c,search_all:a}=e,{refreshData:s}=F({permissions:l,include_external_base:c,search_all:a});m.useEffect(()=>{console.log(56200,s)},[s]);const x=m.useState(e.value||[]),i=t!=null?t[0]:x[0],g=t!=null?t[1]:x[1],S=m.useRef();m.useEffect(()=>{e.onChange!=null&&e.onChange({target:{name:e.name,value:i}})},[i]);const N=n=>{!u||n.trim().length==0||g([...i,{is_free:!0,full_name:n.trim(),_id:new Date().getTime().toString()}])},U=async function(o){return new Promise((_,C)=>s(o).then(_).catch(C))},y=n=>{var o;g(i.filter(_=>n._id!=_._id)),(o=e.onChipsItemRemoved)==null||o.call(e,n)},b=n=>{i.find(o=>o._id==n._id)==null&&g([...i,n])};return f("div",{className:"UsersSuggestionInput-component",children:[f("div",{className:"search-users",children:[u===!0&&r(R,{onClick:(v=S.current)==null?void 0:v.triggerConfirm,className:"mx-2 cursor-pointer rounded bg-primary text-white shadow",size:36}),r(P,{componentRef:S,wrapperClassName:"flex-1",showListOnTop:d,onSuggestionSelected:b,onFreeConfirm:N,placeholder:"جستجو ...",readFromDataSource:U,suggestionRenderer:n=>r("div",{children:n.full_name})})]}),r("div",{className:h({hidden:e.hideChips}),children:r(j,{smallChips:e.smallChips,list:e.value||i,onChipsItemClick:e.onChipsItemClick,handleRemove:e.handle_remove||y})})]})}function j({list:e,onChipsItemClick:l,handleRemove:u,smallChips:d,highlights:t}){const c=e?Array.isArray(e)&&e.length>0?e:[{}]:[];return r(w,{children:r("div",{className:"UsersSuggestionInput-component",children:f("div",{className:"selected-user",children:[console.log(102,c),c==null?void 0:c.map(a=>r(p,{className:h("duration-300",{"!bg-gray-5":a.is_free,"!bg-secondary":a.is_external,"cursor-pointer":l!=null,"!py-0":d,"border-4 border-transparent":t!=null,"!border-highlight":(t==null?void 0:t.find(s=>s._id==a._id))!=null}),children:f("span",{onClick:s=>{l==null||l(a)},className:"flex items-center justify-center",children:[r(D,{onClick:s=>{s.stopPropagation(),u(a)},className:"cursor-pointer pr-2",size:32}),r("span",{className:h("pl-4 pr-1",{"text-xl":!d,"text-sm":d}),children:a.full_name})]})},a._id))]})})})}export{E as U,j as a};
