import{R as p,c as l,r as d,h as E,F as z,j as h}from"./index-0b0339af.js";import{I as L}from"./dateTools-2ed79b68.js";import P from"./InActiveSystem-76fc41ee.js";import W from"./RestrictionShowRequests-3bc8f639.js";import A from"./SetWorkingWeek-3bd86d1e.js";/* empty css              */import"./useRestrictionShowRequests-ddb1f2b9.js";function q(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function H(e){let n=e,s=!1;const t=new Set;return{getState(){return n},updateState(r){n=typeof r=="function"?r(n):r},setState(r){this.updateState(r),t.forEach(i=>i(n))},initialize(r){s||(n=r,s=!0)},subscribe(r){return t.add(r),()=>t.delete(r)}}}const B=()=>H({notifications:[],queue:[],limit:5}),D=B();function V(e,n){const s=e.getState(),t=n([...s.notifications,...s.queue]);e.setState({notifications:t.slice(0,s.limit),queue:t.slice(s.limit),limit:s.limit})}function j(e,n=D){const s=e.id||q();return V(n,t=>e.id&&t.some(r=>r.id===e.id)?t:[...t,{...e,id:s}]),s}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},N.apply(this,arguments)}function F(e,n){if(e==null)return{};var s={},t=Object.keys(e),r,i;for(i=0;i<t.length;i++)r=t[i],!(n.indexOf(r)>=0)&&(s[r]=e[r]);return s}function R(e,n){if(e==null)return{};var s=F(e,n),t,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var J=["size","color"];function K(e){var n=e.size,s=n===void 0?24:n,t=e.color,r=t===void 0?"currentColor":t,i=R(e,J);return p.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-checks",width:s,height:s,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),p.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p.createElement("path",{d:"M7 12l5 5l10 -10"}),p.createElement("path",{d:"M2 12l5 5m5 -5l5 -5"}))}var X=["size","color"];function G(e){var n=e.size,s=n===void 0?24:n,t=e.color,r=t===void 0?"currentColor":t,i=R(e,X);return p.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-x",width:s,height:s,viewBox:"0 0 24 24",stroke:r,strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},i),p.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),p.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))}const Q=({message:e})=>j({disallowClose:!1,title:e,message:"خطا",color:"red",icon:l(G,{}),styles:()=>({title:{fontSize:"100%"},description:{fontSize:"100%"}})}),U=({message:e})=>j({disallowClose:!1,message:"عملیات موفقیت آمیز",title:e,color:"green",icon:l(K,{}),styles:()=>({title:{fontSize:"100%",lineHeight:"2"},description:{fontSize:"100%"}})});function Y(e,n,s,t){console.log(89,n,s,t);const[r,i]=d.useState(null),[g,v]=d.useState(""),[u,y]=d.useState({in_progress:!1});function w(){switch(console.log(54542),n){case"update":v("update"),y({...u,in_progress:!0}),E().updateRestrictions(s,t).then(f=>{console.log(78258),i(f.data)}).catch(f=>{console.error(6001,"Error fetching mission list:",f)}).finally(()=>{y({...u,in_progress:!1})});break;case"select":v("select"),y({...u,in_progress:!0}),E().selectRestrictions(s,t).then(f=>{i(f.data)}).catch(f=>{console.error(6001,"Error fetching mission list:",f)}).finally(()=>{y({...u,in_progress:!1})});break}}return d.useEffect(()=>{w()},[e]),{result:r,resultType:g,state:u,refreshData:w}}const ae=()=>{const[e,n]=d.useState("select"),[s,t]=d.useState(null),[r,i]=d.useState(null),[g,v]=d.useState(!1),{result:u,resultType:y,state:w,refreshData:f}=Y(g,e,s,r),C=h("tr",{children:[l("th",{className:"text-center"}),l("th",{className:"text-right",children:"عنوان"}),l("th",{className:"th-center text-center",children:"  مقدار فعلی "}),l("th",{className:"th-center text-center",children:"  واحد "})]}),[b,O]=d.useState(),[I,S]=d.useState(!1),[o,k]=d.useState();d.useEffect(()=>{console.log(1,u),u&&u.data&&(y==="update"&&(n("select"),t(null),i(null),v(!g)),y==="select"&&O(u.data))},[u]);const M=a=>{var c;console.log(704,a),a.value=Array.isArray(b)?(c=b.find(m=>m.key===a.key))==null?void 0:c.value:"",k(a),S(!0)},T=(a,c)=>{if(console.log(12,a.target.value,c),c==="number")o.value=a.target.value,k({...o});else if(c==="time"){const m=new Date(`1970-01-01T${a.target.value}`);isNaN(m.getTime())?console.error("Invalid time format"):(o.value=L(m.toISOString()).split(" ")[1],k({...o}))}},_=async a=>{try{"local"==="local"&&(console.log(75,a),t(a==null?void 0:a.key),i(a==null?void 0:a.value),n("update"),v(!g),U({message:"محدودیت با موفقیت افزوده شد"}),S(!1))}catch(c){console.log(4,c),Q({message:"خطا در دریافت جزییات"})}},x=[{title:" آخرین زمان ثبت درخواست روزانه",desc:"آخرین زمانی که کاربران برای روز جاری میتوانند درخواست خودرو کنند",value:"",key:1,unit:"ساعت ",type:"time"},{title:" اولین زمان ثبت درخواست روزانه",desc:"اولین زمانی که کاربران برای روز جاری میتوانند درخواست خودرو کنند",value:"",key:2,unit:"ساعت ",type:"time"},{title:"فاصله زمانی بین درخواست های یک کاربر",desc:" حداقل فاصله زمانی  بین دو درخواست متوالی یک کاربر در طول یک روز ",value:"",key:3,unit:"دقیقه ",type:"number"},{title:"محدودیت زمانی درخواست لحظه ای",desc:"حداقل زمان قبل از ثبت درخواست لحظه ای",value:"",key:4,unit:"دقیقه ",type:"number"},{title:"حداکثر فاصله زمانی نسبت به زمان درخواست برای شروع سفر توسط راننده",desc:"حداکثر زمان بعد از ساعت سفر که رانندگان بتوانند سفر را آغاز نمایند ",value:"",key:6,unit:"دقیقه ",type:"number"},{title:"غیر فعال کردن سیستم",desc:"غیر فعال کردن سیستم",value:"",key:7,unit:"روز",type:"date"},{title:"محدودیت زمان نمایش درخواست ها",desc:"محدودیت زمان نمایش درخواست ها",value:"",key:8,unit:"روز",type:"number"},{title:"تنظیم هفته کاری",desc:"تنظییم هفته کاری",value:"",key:9,unit:"روز",type:"string"}],$=x==null?void 0:x.map(a=>{var c;return l(z,{children:h("tr",{className:"table-row",children:[l("td",{children:l("div",{className:"clickable",children:l("i",{onClick:()=>M(a),className:"fa fa-edit"})})}),l("td",{style:{textAlign:"right"},children:a.title}),a.key!==9&&a.key!==7&&l("td",{children:((c=b==null?void 0:b.find(m=>(m==null?void 0:m.key)===(a==null?void 0:a.key)))==null?void 0:c.value)||"ثبت نشده"}),a.key===9&&"-",a.key===7&&"-",l("td",{children:a==null?void 0:a.unit})]},a.name)})});return l("div",{className:"Restrictions-component",children:l("div",{className:"row",children:h("div",{className:"col-12",children:[l("h1",{className:"my-4",children:"محدودیت ها"}),h("table",{children:[l("thead",{className:"text-center",children:C}),l("tbody",{className:"text-center body-div",children:$})]}),I===!0&&l("div",{className:"modal-div",children:l("div",{className:"modal show",id:"myModal","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px",backgroundColor:"rgb(0,0,0,0.8)"},children:l("div",{className:"modal-dialog modal-md",children:h("div",{className:"modal-content",children:[h("div",{className:"modal-header",children:[l("h5",{className:"modal-title",id:"exampleModalLabel",children:(o==null?void 0:o.title)||"Modal Heading"}),l("i",{className:"fa fa-remove",onClick:()=>{n("select"),t(null),i(null),v(!g),S(!1),k(null)}})]}),h("div",{className:"modal-body",children:[o&&(o==null?void 0:o.key)===7&&l(P,{}),o&&(o==null?void 0:o.key)===8&&l(W,{}),o&&(o==null?void 0:o.key)===9&&l(A,{}),o&&(o==null?void 0:o.key)!==7&&(o==null?void 0:o.key)!==8&&(o==null?void 0:o.key)!==9&&h(z,{children:[l(Z,{onRestrictionChange:T,item:o}),h("div",{className:"modal-footer",children:[l("button",{type:"button",className:"my-btn btn-secondary","data-bs-dismiss":"modal",onClick:()=>{S(!1),k(null)},children:"بستن"}),l("button",{type:"button",className:"my-btn btn-primary",onClick:()=>_(o),children:"ذخیره"})]})]})]})]})})})})]})})})},Z=({item:e,onRestrictionChange:n})=>{const{type:s,desc:t,value:r}=e;return h("div",{style:{border:"none"},children:[l("label",{children:t}),l("input",{className:"form-control",type:s,name:"numberInput",id:"numberInput",onChange:i=>n(i,s),defaultValue:r,placeholder:s==="number"?"30 دقیقه":"12:12",step:1})]})};export{ae as default};
