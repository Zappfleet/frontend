import{r as t,y as Ne,u as Ee,bd as Ae,bA as ye,j as a,c as e,aq as se,a2 as Ie,bS as Te,bT as Se,bU as De}from"./index-4b638fea.js";/* empty css              */import{u as Pe}from"./useAganceDriver-96d5f859.js";import{P as Re}from"./PlaqueInput-aecdb007.js";function _e(A,r){const[h,I]=t.useState(null),[y,T]=t.useState(null),[u,n]=t.useState({in_progress:!1});function g(){Ne().selectAganceProfileByDriverId(r).then(m=>{I(m),T("selectVehicleByDriverID")}).catch(m=>{console.error(6001,"useAgenceVehicle selectVehicleByDriverID Error fetching list:",m)}).finally(()=>{n({...u,in_progress:!1})})}return t.useEffect(()=>{console.log(780,r),r&&g()},[r]),{result:h,type:y,state:u,refreshData:g}}const Oe=({handleBackClick:A,title:r})=>{var k,b,x,F,G,L,O,B,U,q,z,j,M,V,$,J,W,H,K,Q;r="پروفایل";const{authInfo:h}=Ee(),[I,y]=t.useState(""),[T,u]=t.useState({CREATE:!1,EDIT:!1,DELETE:!1});t.useEffect(()=>{var i,f;let s={CREATE:!1,EDIT:!1,DELETE:!1},l="";(f=(i=h==null?void 0:h.auth)==null?void 0:i.roles)==null||f.map(E=>{E.permissions.map(p=>{p===Te&&(s.CREATE=!0),p===Se&&(s.EDIT=!0,l+="- update -"),p===De&&(s.DELETE=!0,l+="- delete -")})}),u(s),y(l)},[h]);const[n,g]=t.useState(void 0),[m,te]=t.useState(!1),{result:v,type:we,state:Ce,refreshData:ke}=Pe("select",null),{result:o}=_e(m,n),[S,le]=t.useState(void 0),[ce,D]=t.useState(!1),[ie,P]=t.useState(""),[re,ne]=t.useState("insert"),[N,R]=t.useState("list"),[be,oe]=t.useState({});t.useEffect(()=>{console.log(2),n&&te(!m)},[n]),t.useEffect(()=>{console.log(23)},[S]);const _=[{id:1,value:10},{id:2,value:30},{id:3,value:50}],de=[{key:"",name:"-view-"},{key:"full_name",name:"نام و نام خانوادگی",img:!1},{key:"driverNatNum",name:"کد ملی"}],w=[{id:1,value:10},{id:2,value:30},{id:3,value:50}],he=[{key:"name",name:"عنوان",img:!1},{key:"date",name:"تاریخ",type:"caleadar",key2:"fromdate"}],[d,me]=t.useState([]),[c,C]=t.useState([]);t.useEffect(()=>{var s;v&&pe((s=v==null?void 0:v.data)==null?void 0:s.data)},[v]),t.useEffect(()=>{var s;console.log(78,o,n),o&&(console.log(79,o),fe(),ve((s=o==null?void 0:o.data)==null?void 0:s.data))},[o]);const pe=s=>{me(()=>s.map(l=>{var i;return{...l,driverNatNum:(i=l==null?void 0:l.details)==null?void 0:i.nat_num}}))},ve=async s=>{var l,i,f,E,p,X,Y,Z;C(()=>s.map(ee=>({...ee,allActivity:ee.allActivity.map(ae=>({...ae,date:Ae(ae.date)}))}))),(E=(f=(i=(l=s[0])==null?void 0:l.driverInfo[0])==null?void 0:i.details)==null?void 0:f.attachFile)!=null&&E.driverPic&&le(await ye((Z=(Y=(X=(p=s[0])==null?void 0:p.driverInfo[0])==null?void 0:X.details)==null?void 0:Y.attachFile)==null?void 0:Z.driverPic))},fe=()=>{C([]),ue(),D(!1),P(""),oe({}),ne("insert")},ue=()=>{},ge=(s,l)=>{console.log(100,s,l),l==="view"&&(console.log(8,s==null?void 0:s._id,n),g(s==null?void 0:s._id))};return a("div",{className:"agance-profile-component agance-component",children:[A&&e("i",{className:"fa fa-arrow-left back-icon",onClick:A}),ce&&a("div",{className:"myAttachImage",children:[e("img",{className:"upload-img",src:ie}),e("i",{className:"fa fa-remove close-icon",onClick:()=>{D(!1),P("")}})]}),e("div",{className:"row",children:a("div",{className:"col-12",children:[e("div",{className:"page-title",children:e("i",{onClick:()=>{R("list")},className:N==="list"?"active":"",children:"لیست پروفایل ها"})}),e("div",{className:"page-title",children:e("i",{onClick:()=>{R("insert")},className:N==="insert"?"active":"",children:re==="insert"?r:"پروفایل "})})]})}),e("div",{style:{display:`${N==="list"?"":"none"}`},className:"row",children:a("div",{className:"col-12",children:[(d==null?void 0:d.length)>0&&e(se,{clickOnRow:ge,pagesize:_[0].value,items:d,options:_,thead:de}),(d==null?void 0:d.length)<=0&&a("p",{style:{marginTop:"40px"},children:[" ","موردی برای نمایش وجود ندارد"]})]})}),a("div",{style:{display:`${N==="insert"?"":"none"}`},className:"aganceRegister-component",children:[a("div",{className:"part part1",children:[e("div",{className:"row title",children:a("div",{className:"col-12 ",children:[e("div",{className:"page-title",children:" اطلاعات هویتی"}),e("hr",{className:"hr-title"})]})}),a("div",{className:"row items",children:[e("img",{src:S,alt:"",className:"img-driverPic"}),a("div",{className:"col-12",children:[e("span",{children:"نام و نام خانوادگی"}),a("span",{children:[" ",(b=(k=c[0])==null?void 0:k.driverInfo[0])==null?void 0:b.full_name]})]}),a("div",{className:"col-12",children:[e("span",{children:"کد ملی"}),a("span",{children:[" ",(G=(F=(x=c[0])==null?void 0:x.driverInfo[0])==null?void 0:F.details)==null?void 0:G.nat_num]})]}),a("div",{className:"col-12",children:[e("span",{children:"   شماره تماس"}),a("span",{children:[" ",(O=(L=c[0])==null?void 0:L.driverInfo[0])==null?void 0:O.phone]})]})]})]}),a("div",{className:"part part2",children:[e("div",{className:"row title",children:a("div",{className:"col-12",children:[e("div",{className:"page-title",children:" اطلاعات خودرو"}),e("hr",{className:"hr-title"})]})}),a("div",{className:"row items",children:[a("div",{className:"col-12",children:[e("span",{children:"   شماره پلاک"}),e("span",{children:((U=(B=c[0])==null?void 0:B.vehicleInfo[0])==null?void 0:U.plaque)&&e(Re,{disabled:!0,small:!0,value:Ie((z=(q=c[0])==null?void 0:q.vehicleInfo[0])==null?void 0:z.plaque)})})]}),a("div",{className:"col-12",children:[e("span",{children:"   نوع خودرو "}),a("span",{children:[" ",(V=(M=(j=c[0])==null?void 0:j.vehicleInfo[0])==null?void 0:M.extra)==null?void 0:V.type," "]})]}),a("div",{className:"col-12",children:[e("span",{children:"   رنگ خودرو "}),a("span",{children:[" ",(W=(J=($=c[0])==null?void 0:$.vehicleInfo[0])==null?void 0:J.extra)==null?void 0:W.color," "]})]})]})]}),a("div",{className:"part part3",children:[e("div",{className:"row title",children:a("div",{className:"col-12",children:[e("div",{className:"page-title",children:" گزارش عملکرد "}),e("hr",{className:"hr-title"})]})}),e("div",{className:"row items",children:a("div",{className:"col-12",children:[((H=c[0])==null?void 0:H.allActivity)&&e(se,{pagesize:w[0].value,items:(K=c[0])==null?void 0:K.allActivity,options:w,thead:he}),!((Q=c[0])!=null&&Q.allActivity)&&a("p",{style:{marginTop:"40px"},children:[" ","موردی برای نمایش وجود ندارد"]})]})})]})]})]})};export{Oe as default};
